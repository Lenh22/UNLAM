//! Script# Mozilla Compat Layer
//! Copyright (c) 2006, Nikhil Kothari. All Rights Reserved.
//! http://projects.nikhilk.net
//!
var selectNodes=function(e,t,n){n=n||e;for(var o=(new XPathEvaluator).evaluate(t,n,e.createNSResolver(e.documentElement),XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),r=new Array(o.snapshotLength),i=0;i<o.snapshotLength;i++)r[i]=o.snapshotItem(i);return r},selectSingleNode=function(e,t,n){var o=selectNodes(e,t+="[1]",n);if(0!=o.length)for(var r=0;r<o.length;r++)if(o[r])return o[r];return null};function __loadCompat(e){e.Debug=function(){},e.Debug._fail=function(e){throw new Error(e)},e.Debug.writeln=function(e){window.console&&window.console.debug(e)},e.__getNonTextNode=function(e){try{for(;e&&1!=e.nodeType;)e=e.parentNode}catch(t){e=null}return e}}function _loadSafariCompat(e){Node.prototype.__defineGetter__("text",(function(){return this.textContent})),Node.prototype.__defineSetter__("text",(function(e){this.textContent=e})),Node.prototype.selectNodes=function(e){var t=this.ownerDocument;return selectNodes(t,e,this)},Node.prototype.selectSingleNode=function(e){var t=this.ownerDocument;return selectSingleNode(t,e,this)},Document.prototype.selectNodes=function(e){return selectNodes(this,e,this.documentElement)},Document.prototype.selectSingleNode=function(e){return selectSingleNode(this,e,this.documentElement)}}function _loadMozillaCompat(e){e.navigate=function(e){window.setTimeout('window.location = "'+e+'";',0)};var t=function(e,t){t._mozillaEventHandler=function(e){return window.event=e,t(),e.returnValue},this.addEventListener(e.slice(2),t._mozillaEventHandler,!1)},n=function(e,t){if(t._mozillaEventHandler){var n=t._mozillaEventHandler;delete t._mozillaEventHandler,this.removeEventListener(e.slice(2),n,!1)}};e.attachEvent=t,e.detachEvent=n,e.HTMLDocument.prototype.attachEvent=t,e.HTMLDocument.prototype.detachEvent=n,e.HTMLElement.prototype.attachEvent=t,e.HTMLElement.prototype.detachEvent=n,e.Event.prototype.__defineGetter__("srcElement",(function(){return __getNonTextNode(this.target)||this.currentTarget})),e.Event.prototype.__defineGetter__("cancelBubble",(function(){return this._bubblingCanceled||!1})),e.Event.prototype.__defineSetter__("cancelBubble",(function(e){e&&(this._bubblingCanceled=!0,this.stopPropagation())})),e.Event.prototype.__defineGetter__("returnValue",(function(){return!this._cancelDefault})),e.Event.prototype.__defineSetter__("returnValue",(function(e){e||(this._cancelDefault=!0,this.preventDefault())})),e.Event.prototype.__defineGetter__("fromElement",(function(){var e;return"mouseover"==this.type?e=this.relatedTarget:"mouseout"==this.type&&(e=this.target),__getNonTextNode(e)})),e.Event.prototype.__defineGetter__("toElement",(function(){var e;return"mouseout"==this.type?e=this.relatedTarget:"mouseover"==this.type&&(e=this.target),__getNonTextNode(e)})),e.Event.prototype.__defineGetter__("button",(function(){return 1==this.which?1:3==this.which?2:0})),e.HTMLElement.prototype.__defineGetter__("children",(function(){for(var e=[],t=this.childNodes.length,n=0;n<t;n++){var o=this.childNodes[n];1==o.nodeType&&e.push(o)}return e})),e.HTMLElement.prototype.__defineGetter__("innerText",(function(){try{return this.textContent}catch(t){for(var e=0;e<this.childNodes.length;e++)3==this.childNodes[e].nodeType&&this.childNodes[e].textContent;return str}})),e.HTMLElement.prototype.__defineSetter__("innerText",(function(e){var t=document.createTextNode(e);this.innerHTML="",this.appendChild(t)})),e.HTMLElement.prototype.__defineGetter__("currentStyle",(function(){return window.getComputedStyle(this,null)})),e.HTMLElement.prototype.__defineGetter__("runtimeStyle",(function(){return window.getOverrideStyle(this,null)})),e.HTMLElement.prototype.removeNode=function(e){return this.parentNode.removeChild(this)},e.HTMLElement.prototype.contains=function(e){for(;null!=e&&e!=this;)e=e.parentNode;return null!=e},e.HTMLStyleElement.prototype.__defineGetter__("styleSheet",(function(){return this.sheet})),e.CSSStyleSheet.prototype.__defineSetter__("cssText",(function(e){var t=this.ownerNode;if(t){for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}})),e.CSSStyleSheet.prototype.__defineGetter__("rules",(function(){return this.cssRules})),e.CSSStyleSheet.prototype.addRule=function(e,t,n){this.insertRule(e+"{"+t+"}",n)},e.CSSStyleSheet.prototype.removeRule=function(e){this.deleteRule(e)},e.CSSStyleDeclaration.prototype.__defineGetter__("styleFloat",(function(){return this.cssFloat})),e.CSSStyleDeclaration.prototype.__defineSetter__("styleFloat",(function(e){this.cssFloat=e})),DocumentFragment.prototype.getElementById=function(e){var t,n,o=[],r=this.childNodes;for(n=0;n<r.length;n++)1==(t=r[n]).nodeType&&o.push(t);for(;o.length;){if((t=o.shift()).id==e)return t;if(0!=(r=t.childNodes).length)for(n=0;n<r.length;n++)1==(t=r[n]).nodeType&&o.push(t)}return null},DocumentFragment.prototype.getElementsByTagName=function(e){var t,n,o=[],r=[],i=this.childNodes;for(n=0;n<i.length;n++)1==(t=i[n]).nodeType&&r.push(t);for(;r.length;)if((t=r.shift()).tagName==e&&o.add(t),0!=(i=t.childNodes).length)for(n=0;n<i.length;n++)1==(t=i[n]).nodeType&&r.push(t);return o},DocumentFragment.prototype.createElement=function(e){return document.createElement(e)},e.XMLDocument.prototype.selectNodes=function(e,t){return selectNodes(this,e,t)},e.XMLDocument.prototype.selectSingleNode=function(e,t){return selectSingleNode(this,e,t)},Node.prototype.selectNodes=function(e){return this.ownerDocument.selectNodes(e,this)},Node.prototype.selectSingleNode=function(e){return this.ownerDocument.selectSingleNode(e,this)},Node.prototype.__defineGetter__("baseName",(function(){return this.localName})),Node.prototype.__defineGetter__("text",(function(){return this.textContent})),Node.prototype.__defineSetter__("text",(function(e){this.textContent=e})),Node.prototype.__defineGetter__("xml",(function(){return(new XMLSerializer).serializeToString(this)}))}__loadCompat(window),window.navigator.userAgent.indexOf("Safari")<0?_loadMozillaCompat(window):_loadSafariCompat(window);